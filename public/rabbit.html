<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Meta Rabbit Wallet - Ativos</title>
<link rel="icon" href="logo.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
  * { box-sizing: border-box; }
  body {
    margin:0; padding:0; background:#000; color:#fff;
    font-family:'Roboto',sans-serif; display:flex;
    flex-direction:column; align-items:center; min-height:100vh;
  }
  form.wallet {
    background:#1a1a1a; border-radius:16px; padding:30px 24px;
    width:95%; max-width:500px; margin:30px 0; box-shadow:0 0 12px #000;
  }
  .header{text-align:center;margin-bottom:24px;}
  .header h1{font-size:2rem;color:#00ff66;margin-bottom:10px;}
  .header img{width:80px;height:80px;object-fit:contain;}
  .input-box{margin-bottom:20px;}
  label{font-weight:bold;color:#ccc;display:block;margin-bottom:6px;}
  select,input[type="number"]{
    width:100%; padding:12px; border-radius:10px;
    background:#141414; border:2px solid #333; color:#fff; font-size:1rem;
  }
  select:focus,input:focus{outline:2px solid #00ff66;background:#0d0d0d;}
  .btn{width:100%;background:#00ff66;color:#fff;border:none;border-radius:30px;padding:12px;font-weight:bold;cursor:pointer;transition:0.3s;margin-bottom:20px;}
  .btn:hover{background:#00cc55;}
  #output{background:#121212;color:#c0c0c0;font-family:monospace;font-size:0.95rem;padding:14px;border-radius:10px;margin-bottom:20px;white-space:pre-wrap;}
  #qrcode-stripe{margin:16px auto;width:220px;height:220px;}
  footer{margin-top:auto;padding:20px;color:#888;font-size:0.9rem;text-align:center;}
</style>
</head>
<body>

<form class="wallet" onsubmit="return false;">
  <div class="header">
    <h1>Meta Rabbit</h1>
    <img src="t.png" alt="Meta Rabbit Logo">
  </div>

  <div class="input-box">
    <label for="assetSelect">Selecione seu ativo:</label>
    <select id="assetSelect">
      <option value="">Selecione um ativo</option>
      <!-- Z-OBTC -->
      <option value="zobtc_starter50">Z-OBTC ‚Äî $10 - $40 (Starter50 Œ£)</option>
      <option value="zobtc_growth500">Z-OBTC ‚Äî $100 - $200 (Growth500 Œ£)</option>
      <option value="zobtc_pro1000">Z-OBTC ‚Äî $200 - $400 (Pro1000 Œ£)</option>
      <option value="zobtc_advanced2000">Z-OBTC ‚Äî $400 - $800 (Advanced2000 Œ£)</option>
      <option value="zobtc_diamond500">Z-OBTC ‚Äî $1,000 - $3,000 (Diamond500 Œ£)</option>
      <option value="zobtc_ultraenther">Z-OBTC ‚Äî $2,000 - $6,000 (UltraEnther Œ£)</option>
      <option value="zobtc_qzdiamond">Z-OBTC ‚Äî $1,400 - $4,000 (QZDiamond Œ£)</option>
      <option value="zobtc_entherprime">Z-OBTC ‚Äî $600 - $1,800 (EntherPrime Œ£)</option>
      <option value="zobtc_darkusd">Z-OBTC ‚Äî $400 - $1,600 (DarkUSD Œ£)</option>
      <option value="zobtc_darkbtc">Z-OBTC ‚Äî $2,000 - $10,000 (DarkBTC Œ£)</option>
      <option value="zobtc_trixusd">Z-OBTC ‚Äî $1,000 - $5,000 (TrixUSD Œ£)</option>
      <option value="zobtc_jbxdiamond">Z-OBTC ‚Äî $4,000 - $12,000 (JBX Diamond Œ£)</option>
      <!-- Fractio -->
      <option value="zobtc_fractio_lux">Z-OBTC ‚Äî 1000 HF Œ£ (Fractio Lux Œ£)</option>
      <option value="zobtc_fractio_flexus">Z-OBTC ‚Äî 500 QFX Œ£ (Fractio Flexus Œ£)</option>
      <option value="zobtc_fractio_scala">Z-OBTC ‚Äî 500 JBXF Œ£ (Fractio Scala Œ£)</option>
      <option value="zobtc_fractio_vox">Z-OBTC ‚Äî 400 QOOP Œ£ (Fractio Vox Œ£)</option>
      <option value="zobtc_fractio_valoris">Z-OBTC ‚Äî 300 QVALFX Œ£ (Fractio Valoris Œ£)</option>
      <option value="zobtc_fractio_mens">Z-OBTC ‚Äî 100 NBH Œ£ (Fractio Mens Œ£)</option>
      <option value="zobtc_fractio_yenensis">Z-OBTC ‚Äî $15,000 Œ£ (Fractio Yenensis Œ£)</option>
      <option value="zobtc_fractio_eurox">Z-OBTC ‚Äî $5,000 Œ£ (Fractio Eurox Œ£)</option>
      <!-- Novos -->
      <option value="zobtc_nova_start">Z-OBTC ‚Äî $50 - $150 (NovaStart Œ£)</option>
      <option value="zobtc_techboost">Z-OBTC ‚Äî $300 - $900 (TechBoost Œ£)</option>
      <option value="zobtc_greenfund">Z-OBTC ‚Äî $200 - $600 (GreenFund Œ£)</option>
      <option value="zobtc_futurevault">Z-OBTC ‚Äî $500 - $2,000 (FutureVault Œ£)</option>
      <option value="zobtc_quantumrise">Z-OBTC ‚Äî $1,000 - $4,000 (QuantumRise Œ£)</option>
      <option value="zobtc_globalelite">Z-OBTC ‚Äî $5,000 - $15,000 (GlobalElite Œ£)</option>
      <option value="zobtc_innovaflex">Z-OBTC ‚Äî $700 - $2,500 (InnovaFlex Œ£)</option>
      <option value="zobtc_digitalgem">Z-OBTC ‚Äî $1,500 - $5,000 (DigitalGem Œ£)</option>
      <option value="zobtc_ventureprime">Z-OBTC ‚Äî $3,000 - $10,000 (VenturePrime Œ£)</option>
      <option value="zobtc_stellarflux">Z-OBTC ‚Äî $2,000 - $8,000 (StellarFlux Œ£)</option>
      <!-- Pynk BTC -->
      <option value="pynkbtc_starter">Pynk BTC ‚Äî $50 - $200 (Starter Œ£)</option>
      <option value="pynkbtc_growth">Pynk BTC ‚Äî $200 - $800 (Growth Œ£)</option>
      <option value="pynkbtc_pro">Pynk BTC ‚Äî $800 - $2,000 (Pro Œ£)</option>
    </select>
  </div>

  <div class="input-box">
    <label for="valueInput">Valor por unidade (USD):</label>
    <input type="number" id="valueInput" placeholder="Digite o valor" min="1">
  </div>

  <div class="input-box">
    <label for="quantityInput">Quantidade de unidades:</label>
    <input type="number" id="quantityInput" placeholder="Digite a quantidade" min="1" value="1">
  </div>

  <button id="generateBtn" class="btn">Gerar QR Code</button>

  <div id="qrcode-stripe"></div>
  <div id="output"></div>
</form>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
(() => {
  const generateBtn = document.getElementById("generateBtn");
  const qrContainer = document.getElementById("qrcode-stripe");
  const output = document.getElementById("output");
  const assetSelect = document.getElementById("assetSelect");
  const valueInput = document.getElementById("valueInput");
  const quantityInput = document.getElementById("quantityInput");

  async function generateQR() {
    qrContainer.innerHTML = "";
    output.innerText = "";

    const value = parseFloat(valueInput.value);
    const quantity = parseInt(quantityInput.value) || 1;

    if (!value || value <= 0) return alert("‚ö†Ô∏è Valor inv√°lido.");
    if (quantity <= 0) return alert("‚ö†Ô∏è Quantidade inv√°lida.");
    if (!assetSelect.value) return alert("‚ö†Ô∏è Selecione um ativo.");

    try {
      const res = await fetch("/api/create-checkout-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ asset: assetSelect.value, value, quantity })
      });

      const data = await res.json();
      if (!res.ok) return alert(data.error || "Erro ao criar sess√£o Stripe.");

      const stripeURL = data.url;

      QRCode.toCanvas(stripeURL, { 
        width: 220, 
        color: { dark: "#00ff66", light: "#1a1a1a" } 
      }, (err, canvas) => {
        if (err) return console.error(err);
        qrContainer.appendChild(canvas);
      });

      output.innerText = `üì≤ QR Code Stripe gerado!
üí∞ Valor total: $${(value*quantity).toFixed(2)}
üîÅ Ativo: ${assetSelect.value}`;

    } catch (err) {
      console.error(err);
      alert("Erro de conex√£o com o servidor.");
    }
  }

  generateBtn.addEventListener("click", generateQR);
})();
</script>

<footer>Meta Rabbit ¬© 2025 BY LUCAS JANUARIO</footer>
</body>
</html>
